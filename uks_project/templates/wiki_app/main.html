<!DOCTYPE html>
{% extends 'repositories_app/repository.html' %}
    {% block show_block %}

    <div class="row">
        <div class="col">
            <h1>Wiki</h1>
        </div>
        <div class="col">
            {% if role %}
                <a class="btn btn-success" style="float:right;margin-top:2%" href="/repositories/repository/{{repository.id}}/wiki/page/new" role="button">Add new page</a>
            {% endif %}
        </div>
    </div>
    <hr>
    <div class="row">
        <div class="col-md-3">
            {% if pages %}
                <table class="table table-striped" style="margin-top: 30px; ">
                    <tr>
                        <th colspan="2">Pages</th>
                    </tr>
                    {% for page in pages %}
                        <tr>
                            <td>
                                <a style="color:green" href="/repositories/repository/{{repository.id}}/wiki/page/{{page.id}}">{{page.title}}</a>                    
                            </td>
                            <td>
                                {% if role %}
                                    <ul class="navbar-nav ml-auto">
                                        <li class="nav-item dropdown">
                                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-ellipsis-h"></i></a>
                                            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                                <a class="dropdown-item" href="/repositories/repository/{{repository.id}}/wiki/page/{{page.id}}/edit">Edit</a>
                                                <a class="dropdown-item" href="/repositories/repository/{{repository.id}}/wiki/page/{{page.id}}/delete">Delete</a>
                                            </div>
                                        </li>
                                    </ul>
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            {% else %}
             <h4>
                This repository doesn't have any page</h4>
            {% endif %}
        </div>
        <div class="col-md-9" style="padding: 3%;">
            {% block page_block %}
            {% endblock %}
        </div>
    </div>
    {% endblock %}